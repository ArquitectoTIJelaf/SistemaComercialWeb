<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" type="image/png" sizes="16x16" href="~/favicon.ico">
    <title>Template - @ViewBag.Title</title>
    @*@Styles.Render("~/bundles/css")*@
    <link href="~/wwwroot/statics/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="~/wwwroot/plugins/bower_components/toast-master/css/jquery.toast.css" rel="stylesheet" />
    <link href="~/wwwroot/statics/css/animate.css" rel="stylesheet">
    <link href="~/wwwroot/plugins/bower_components/sidebar-nav/dist/sidebar-nav.min.css" rel="stylesheet" />
    <link href="~/wwwroot/statics/css/style.css" rel="stylesheet">
    <link href="~/wwwroot/statics/css/colors/blue-dark.css" rel="stylesheet">
    <link href="~/wwwroot/statics/css/custom-style.css" rel="stylesheet">
    <link href="~/wwwroot/plugins/bower_components/bootrstrap-datetimepicker/bootstrap-datetimepicker.min.css" rel="stylesheet">
    <link href="~/wwwroot/plugins/bower_components/sweetalert/sweetalert.css" rel="stylesheet">
    @RenderSection("styles", required: false)
    <script type="text/javascript">
        var main_globals = {};
        main_globals.virtualPath = "@HttpContext.Current.Request.ApplicationPath";
        main_globals.Path = "@HttpContext.Current.Request.Path";
        main_globals.AbsolutePath = "@HttpContext.Current.Request.Url.AbsolutePath";
        main_globals.Query = "@HttpContext.Current.Request.Url.Query";
        main_globals.PathAndQuery = "@HttpContext.Current.Request.Url.PathAndQuery";
        main_globals.flagDevelop = JSON.parse("true".toLowerCase());
    </script>
    <!--CDN-->
    <!-- <link rel="stylesheet" href="" /> -->
    <!--CDN-->
</head>
<body class="fix-header">
    <div class="preloader">
        <svg class="circular" viewBox="25 25 50 50">
            <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="2" stroke-miterlimit="10" />
        </svg>
    </div>
    <div id="wrapper">
        @Html.Partial("_LayoutHeader")
        @Html.Partial("_LayoutSidebar")
        <div id="page-wrapper">
            <div class="container-fluid">
                @RenderBody()
            </div>
            @Html.Partial("_LayoutFooter")
        </div>
    </div>
    @Scripts.Render("~/bundles/js")
    <script src="~/wwwroot/plugins/bower_components/signalR/jquery.signalR-2.4.0.min.js"></script>
    <script src="~/signalr/hubs"></script>
    <script>

        var ClientSignalR = {};
        ClientSignalR.NroViaje = '';
        ClientSignalR.FechaViaje = '';
        ClientSignalR.NroAsiento = '';
        ClientSignalR.Owner = false;


        $(function () {
            
            var notification = $.connection.notificationHub;

            notification.client.bloquearBus = function (nroViaje, fechaViaje, nroAsiento) {
                if (String(appVueVenta.filtro.NroViaje) === nroViaje && appVueVenta.filtro.Fecha === fechaViaje && !ClientSignalR.Owner)
                    $('#btnAsiento_' + nroAsiento).css('background-image', `radial-gradient(circle, ${appVueVenta.$options.filters.hexToRgb(APP.ventas.colorBloqueoExterno, 0.5)} ,${appVueVenta.$options.filters.hexToRgb(APP.ventas.colorBloqueoExterno)}`);
                ClientSignalR.Owner = false;
            };

            notification.client.liberarBus = function (nroViaje, fechaViaje, nroAsiento) {
                if (String(appVueVenta.filtro.NroViaje) === nroViaje && appVueVenta.filtro.Fecha === fechaViaje && !ClientSignalR.Owner)
                    $('#btnAsiento_' + nroAsiento).css('background-image', '');
                ClientSignalR.Owner = false;
            };

            $.connection.hub.start().done(function () {
                $('#btnHiddenBloquearBus').click(function () {
                    notification.server.bloquear(ClientSignalR.NroViaje, ClientSignalR.FechaViaje, ClientSignalR.NroAsiento);
                });

                $('#btnHiddenLiberarBus').click(function () {
                    notification.server.liberar(ClientSignalR.NroViaje, ClientSignalR.FechaViaje, ClientSignalR.NroAsiento);
                });
            });

            $.connection.hub.logging = true;

        });
    </script>
    <!-- CDNJS -->
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/vue-focus/2.1.0/vue-focus.js"></script> -->
    <!-- example: http://jsfiddle.net/8y70Lmz3/2/ -->
    <!-- CDNJS -->
    @RenderSection("scripts", required: false)
</body>
</html>